<%- include header %>
<!-- MAIN PANEL -->
<div id="main" role="main">

    <!-- RIBBON -->
    <div id="ribbon">

        <span class="ribbon-button-alignment"> <span id="refresh" class="btn btn-ribbon" data-title="refresh"
                                                     rel="tooltip" data-placement="bottom"
                                                     data-original-title="<i class='text-warning fa fa-warning'></i> Warning! This will reset all your widget settings."
                                                     data-html="true"><i class="fa fa-refresh"></i></span> </span>

        <!-- breadcrumb -->
        <ol class="breadcrumb">
            <li>主页</li>
            <li>工程公司项目管理</li>
        </ol>
        <!-- end breadcrumb -->

        <!-- You can also add more buttons to the
        ribbon for further usability

        Example below:

        <span class="ribbon-button-alignment pull-right">
        <span id="search" class="btn btn-ribbon hidden-xs" data-title="search"><i class="fa-grid"></i> Change Grid</span>
        <span id="add" class="btn btn-ribbon hidden-xs" data-title="add"><i class="fa-plus"></i> Add</span>
        <span id="search" class="btn btn-ribbon" data-title="search"><i class="fa-search"></i> <span class="hidden-mobile">Search</span></span>
        </span> -->

    </div>
    <!-- END RIBBON -->

    <!-- MAIN CONTENT -->
    <div id="content">

        <div class="row">
            <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
                <h1 class="page-title txt-color-blueDark"><i class="fa-fw fa fa-home"></i> 主页 <span>> 工程公司项目管理</span>
                </h1>
            </div>
           <!--  <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
                <ul id="sparks" class="">
                    <li class="sparks-info">
                        <h5> 用户数 <span class="txt-color-blue">128</span></h5>

                        <div class="sparkline txt-color-blue hidden-mobile hidden-md hidden-sm">
                            10,45,29,34,56,12
                        </div>
                    </li>
                    <li class="sparks-info">
                        <h5> 在线用户数 <span class="txt-color-purple"><i class="fa fa-arrow-circle-up"></i>&nbsp;45%</span>
                        </h5>

                        <div class="sparkline txt-color-purple hidden-mobile hidden-md hidden-sm">
                            110,150,300,130,400,240,220,310,220,300, 270, 210
                        </div>
                    </li>
                    <li class="sparks-info">
                        <h5> 在线百分比 <span class="txt-color-greenDark"><i class="fa fa-shopping-cart"></i>&nbsp;2447</span>
                        </h5>

                        <div class="sparkline txt-color-greenDark hidden-mobile hidden-md hidden-sm">
                            110,150,300,130,400,240,220,310,220,300, 270, 210
                        </div>
                    </li>
                </ul>
            </div> -->
        </div>
        <!-- widget grid -->
        <section id="widget-grid" class="">

            <!-- row -->
            <div class="row">
                <article class="col-sm-12">
                    <!-- new widget -->
                    <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-0" data-widget-editbutton="false">
                        <!-- widget options:
                        usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                        data-widget-colorbutton="false"
                        data-widget-editbutton="false"
                        data-widget-togglebutton="false"
                        data-widget-deletebutton="false"
                        data-widget-fullscreenbutton="false"
                        data-widget-custombutton="false"
                        data-widget-collapsed="true"
                        data-widget-sortable="false"

                        -->


                        <!-- widget div-->
                        <header>
                            <span class="widget-icon"> <i class="fa fa-user"></i> </span>

                            <h2>用户管理 </h2>

                        </header>


                        <!-- 按钮区 BEGIN -->
                        <div id="ControlButton" class="hidden">
                            <div style="position: absolute;left: 200px;top:4px">
                                <button id="new-proj" data-toggle="modal" class="btn btn-default" href="#addProj"
                                    style="position:relative">新增工程公司项目
                                </button>
                                <!--<button id="view-user" class="btn btn-default" href="javascript:void(0);"-->
                                    <!--style="position:relative">详情-->
                                <!--</button>-->
                               <button id="delete-proj" class="btn btn-default" href="javascript:void(0);"
                                    style="position:relative">删除工程公司项目
                                </button>
                            </div>
                        </div>

                        <!-- 按钮区 END -->

                        <!-- 测试区 BEGIN -->

                        <!-- 	<% engprojs.forEach(function (engproj, index) { %>
					  <p><h2><a href="#"><%= engproj.transid %></a></h2></p>
					    作者：<a href="#"><%= engproj.controlid %></a> | 
					    密码：<a href="#"><%= engproj.projname %></a> |
					<% }) %> 
				-->
                        <!-- 测试区 END -->

                        <!-- widget div-->
                        <div>


                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->

                            </div>
                            <!-- end widget edit box -->

                            <!-- widget content -->
                            <div class="widget-body no-padding">
                                <div class="widget-body-toolbar">

                                </div>

                                <table id="datatable_col_reorder" class="table table-striped table-hover">
                                    <thead>
                                    <tr>
                                        <th><input type="checkbox" name="selectAll"/></th>
                                        <th>序号
                                        </th>
                                        <th>传输编号
                                        </th>
                                        <th>受控编号
                                        </th>
                                        <th>工程名称
                                        </th>
                                        <th>甲方项目负责人
                                        </th>
                                        <th>乙方项目负责人
                                        </th>
                                        <th>项目类别
                                        </th>
                                        <th>工程属性
                                        </th>
                                        <th>项目名称
                                        </th>
                                        <th>工程地址
                                        </th>
                                        <th>操作
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <% engprojs.forEach(function (engproj, index) { %>
                                    <tr>
                                        <td><input type="checkbox" name="selectOne" id="<%= user._id%>"/></td>
                                       <!--  <td><%= index %></td> -->
                                        <td><%if(engproj.basicInfo.serialno === null || engproj.basicInfo.serialno === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.serialno%>
                                            <%}%></td>
                                        <td><%if(engproj.basicInfo.transid === null || engproj.basicInfo.transid === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.transid%>
                                            <%}%></td>
                                        <td><%if(engproj.basicInfo.controlid === null || engproj.basicInfo.controlid === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.controlid%>
                                            <%}%>
                                        </td>
                                        <td><%if(engproj.basicInfo.projname === null || engproj.basicInfo.projname === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.projname%>
                                            <%}%>
                                        </td>
                                        <td><%if(engproj.basicInfo.firstpartyofficer === null || engproj.basicInfo.firstpartyofficer === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.firstpartyofficer%>
                                            <%}%>
                                        </td>
                                        <td><%if(engproj.basicInfo.secondpartyofficer === null || engproj.basicInfo.secondpartyofficer === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.secondpartyofficer%>
                                            <%}%>
                                        </td>
                                        <td><%if(engproj.basicInfo.projtype === null || engproj.basicInfo.projtype === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.projtype%>
                                            <%}%>
                                        </td>
                                        <td><%if(engproj.basicInfo.properties === null || engproj.basicInfo.properties === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.properties%>
                                            <%}%>
                                        </td>
                                        <td><%if(engproj.basicInfo.subname === null || engproj.basicInfo.subname === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.subname%>
                                            <%}%>
                                        </td>
                                        <td><%if(engproj.basicInfo.address === null || engproj.basicInfo.address === undefined){%>
                                            <!--留白，不显示-->
                                            <%}else{ %>
                                            <%= engproj.basicInfo.address%>
                                            <%}%>
                                        </td>
                                        <td><a class="edit" data-toggle="modal"  href="#editProj" data-projId="<%= engproj._id%>">详情</a></td>
                                    </tr>
                                    <% }) %>
                                    </tbody>
                                </table>

                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->
                    </div>
                    <!-- end widget -->

                </article>
            </div>

            <!-- end row -->

        </section>
        <!-- end widget grid -->


        <!-- Modal 弹出框 begin-->
        <div class="modal fade" id="addProj" tabindex="-1" role="dialog widget">
            <div class="modal-dialog">
                <!-- widget grid -->
                <section id="widget-grid" class="modal-content">
                        <!-- row -->
                        <div class="row">
                            <!-- NEW WIDGET START -->
                            <article class="col-sm-12 col-md-12 col-lg-12 sortable-grid ui-sortable">
                                <!-- Widget ID (each widget will need unique ID)-->
                                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false" data-widget-deletebutton="false" style="
    margin-bottom: 0px;">
                                    <!-- widget options:
                                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                                    data-widget-colorbutton="false"
                                    data-widget-editbutton="false"
                                    data-widget-togglebutton="false"
                                    data-widget-deletebutton="false"
                                    data-widget-fullscreenbutton="false"
                                    data-widget-custombutton="false"
                                    data-widget-collapsed="true"
                                    data-widget-sortable="false"

                                    -->
                                    <header>
                                        <div class="jarviswidget-ctrls" role="menu">
                                            <a href="javascript:void(0);" class="button-icon jarviswidget-delete-btn" rel="tooltip" title="" data-placement="bottom" data-original-title="close"><i class="fa fa-times"></i></a></div>
                                        <span class="widget-icon"> <i class="fa fa-check"></i> </span>
                                        <h2>新增工程公司项目 </h2>
                                    </header>

                                    <!-- widget div-->
                                    <div>

                                        <!-- widget edit box -->
                                        <div class="jarviswidget-editbox">
                                            <!-- This area used as dropdown edit box -->

                                        </div>
                                        <!-- end widget edit box -->

                                        <!-- widget content -->
                                        <div class="widget-body">

                                            <div class="row">
                                                <form id="wizard-1" novalidate="novalidate">
                                                    <div id="bootstrap-wizard-1" class="col-sm-12">
                                                        <div class="form-bootstrapWizard">

                                                            <ul class="bootstrapWizard form-wizard">
                                                                    <li class="active" data-target="#step1" style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                        <a href="#tab1" data-toggle="tab"> <span
                                                                                    class="step">1</span> <span class="title">基本信息</span>
                                                                        </a>
                                                                    </li>
                                                                    <li data-target="#step2"  style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                        <a href="#tab2" data-toggle="tab"> <span
                                                                                    class="step">2</span> <span class="title">材料信息</span>
                                                                        </a>
                                                                    </li>
                                                                    <li data-target="#step3"  style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                    <a href="#tab3" data-toggle="tab"> <span
                                                                                class="step">3</span> <span class="title">施工情况信息</span>
                                                                    </a>
                                                                    </li>
                                                                    <li data-target="#step4" style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                    <a href="#tab4" data-toggle="tab"> <span
                                                                                class="step">4</span> <span class="title">资料信息</span>
                                                                    </a>
                                                                    </li>
                                                                    <li data-target="#step5" style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                    <a href="#tab5" data-toggle="tab"> <span
                                                                                class="step">5</span> <span class="title">合同信息</span>
                                                                    </a>
                                                                    </li>
                                                                    <li data-target="#step6" style="padding-right: 0;padding-left: 0;width: 16.6%">
                                                                    <a href="#tab6" data-toggle="tab"> <span
                                                                                class="step">6</span> <span class="title">收入信息</span>
                                                                    </a>
                                                                    </li>
                                                                </ul>

                                                            <div class="clearfix"></div>
                                                        </div>
                                                        <div class="tab-content">
                                                            <div class="tab-pane active" id="tab1">
                                                                <br>

                                                                <h3><strong>Step 1 </strong> - Basic Information</h3>

                                                                <div class="row">

                                                                    <div class="col-sm-12">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-envelope fa-lg fa-fw"></i></span>
                                                                                <input class="form-control input-lg"
                                                                                       placeholder="email@address.com"
                                                                                       type="text" name="email" id="email">

                                                                            </div>
                                                                        </div>

                                                                    </div>

                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-user fa-lg fa-fw"></i></span>
                                                                                <input class="form-control input-lg"
                                                                                       placeholder="First Name" type="text"
                                                                                       name="fname" id="fname">

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-user fa-lg fa-fw"></i></span>
                                                                                <input class="form-control input-lg"
                                                                                       placeholder="Last Name" type="text"
                                                                                       name="lname" id="lname">

                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="tab-pane" id="tab2">
                                                                <br>

                                                                <h3><strong>Step 2</strong> - Billing Information</h3>

                                                                <div class="row">
                                                                    <div class="col-sm-4">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-flag fa-lg fa-fw"></i></span>
                                                                                <select name="country"
                                                                                        class="form-control input-lg">

                                                                                    <option value="Zimbabwe">Zimbabwe</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-map-marker fa-lg fa-fw"></i></span>
                                                                                <select class="form-control input-lg"
                                                                                        name="city">
                                                                                    <option value="" selected="selected">Select
                                                                                        City
                                                                                    </option>
                                                                                    <option>Amsterdam</option>
                                                                                    <option>Atlanta</option>
                                                                                    <option>Minneapolis</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-envelope-o fa-lg fa-fw"></i></span>
                                                                                <input class="form-control input-lg"
                                                                                       placeholder="Postal Code" type="text"
                                                                                       name="postal" id="postal">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-phone fa-lg fa-fw"></i></span>
                                                                                <input class="form-control input-lg"
                                                                                       data-mask="+99 (999) 999-9999"
                                                                                       data-mask-placeholder="X"
                                                                                       placeholder="+1" type="text"
                                                                                       name="wphone" id="wphone">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-mobile fa-lg fa-fw"></i></span>
                                                                                <input class="form-control input-lg"
                                                                                       data-mask="+99 (999) 999-9999"
                                                                                       data-mask-placeholder="X"
                                                                                       placeholder="+01" type="text"
                                                                                       name="hphone" id="hphone">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane" id="tab3">
                                                                <br>

                                                                <h3><strong>Step 3</strong> - Domain Setup</h3>

                                                                <div class="alert alert-info fade in">
                                                                    <button class="close" data-dismiss="alert">
                                                                        ×
                                                                    </button>
                                                                    <i class="fa-fw fa fa-info"></i>
                                                                    <strong>Info!</strong> Place an info message box if you
                                                                    wish.
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>This is a label</label>
                                                                    <input class="form-control input-lg"
                                                                           placeholder="Another input box here..." type="text"
                                                                           name="etc" id="etc">
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane" id="tab4">
                                                                <br>

                                                                <h3><strong>Step 4</strong> - Save Form</h3>
                                                                <br>

                                                                <h1 class="text-center text-success"><strong><i
                                                                                class="fa fa-check fa-lg"></i> Complete</strong>
                                                                </h1>
                                                                <h4 class="text-center">Click next to finish</h4>
                                                                <br>
                                                                <br>
                                                            </div>
                                                            <div class="tab-pane" id="tab5">
                                                                <br>

                                                                <h3><strong>Step 5</strong> - Save Form</h3>
                                                                <br>

                                                                <h1 class="text-center text-success"><strong><i
                                                                                class="fa fa-check fa-lg"></i> Complete</strong>
                                                                </h1>
                                                                <h4 class="text-center">Click next to finish</h4>
                                                                <br>
                                                                <br>
                                                            </div>
                                                            <div class="tab-pane" id="tab6">
                                                                <br>

                                                                <h3><strong>Step 6</strong> - Save Form</h3>
                                                                <br>

                                                                <h1 class="text-center text-success"><strong><i
                                                                                class="fa fa-check fa-lg"></i> Complete</strong>
                                                                </h1>
                                                                <h4 class="text-center">Click next to finish</h4>
                                                                <br>
                                                                <br>
                                                            </div>

                                                            <div class="form-actions">
                                                                <div class="row">
                                                                    <footer>
                                                                        <button type="submit" class="btn btn-primary">
                                                                            Submit
                                                                        </button>
                                                                        <button type="button" class="btn btn-default" onclick="window.history.back();">
                                                                            Back
                                                                        </button>
                                                                    </footer>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </form>
                                            </div>

                                        </div>
                                        <!-- end widget content -->

                                    </div>
                                    <!-- end widget div -->

                                </div>
                                <!-- end widget -->

                            </article>
                            <!-- WIDGET END -->

                        </div>

                        <!-- end row -->

                    </section>
                <!-- end widget grid -->
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal 弹出框 END -->

        <!-- 修改用户信息 Modal 弹出框 begin-->
        <div class="modal fade" id="editProj" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <!-- widget grid -->
                <section id="widget-grid" class="modal-content">
                    <!-- row -->
                    <div class="row">
                        <!-- NEW WIDGET START -->
                        <article class="col-sm-12 col-md-12 col-lg-12 sortable-grid ui-sortable">
                            <!-- Widget ID (each widget will need unique ID)-->
                            <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false" data-widget-deletebutton="false" style="
    margin-bottom: 0px;">
                                <!-- widget options:
                                usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                                data-widget-colorbutton="false"
                                data-widget-editbutton="false"
                                data-widget-togglebutton="false"
                                data-widget-deletebutton="false"
                                data-widget-fullscreenbutton="false"
                                data-widget-custombutton="false"
                                data-widget-collapsed="true"
                                data-widget-sortable="false"

                                -->
                                <header>
                                    <div class="jarviswidget-ctrls" role="menu">
                                        <a href="javascript:void(0);" class="button-icon jarviswidget-delete-btn" rel="tooltip" title="" data-placement="bottom" data-original-title="close"><i class="fa fa-times"></i></a></div>
                                    <span class="widget-icon"> <i class="fa fa-check"></i> </span>
                                    <h2>工程公司项目详情 </h2>
                                </header>

                                <!-- widget div-->
                                <div>

                                    <!-- widget edit box -->
                                    <div class="jarviswidget-editbox">
                                        <!-- This area used as dropdown edit box -->

                                    </div>
                                    <!-- end widget edit box -->

                                    <!-- widget content -->
                                    <div class="widget-body">

                                        <div class="row">
                                            <form id="wizard-1" novalidate="novalidate">
                                                <div id="bootstrap-wizard-1" class="col-sm-12">
                                                    <div class="form-bootstrapWizard">

                                                        <ul class="bootstrapWizard form-wizard">
                                                            <li class="active" data-target="#step1" style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                <a href="#tab1" data-toggle="tab"> <span
                                                                            class="step">1</span> <span class="title">基本信息</span>
                                                                </a>
                                                            </li>
                                                            <li data-target="#step2"  style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                <a href="#tab2" data-toggle="tab"> <span
                                                                            class="step">2</span> <span class="title">材料信息</span>
                                                                </a>
                                                            </li>
                                                            <li data-target="#step3"  style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                <a href="#tab3" data-toggle="tab"> <span
                                                                            class="step">3</span> <span class="title">施工情况信息</span>
                                                                </a>
                                                            </li>
                                                            <li data-target="#step4" style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                <a href="#tab4" data-toggle="tab"> <span
                                                                            class="step">4</span> <span class="title">资料信息</span>
                                                                </a>
                                                            </li>
                                                            <li data-target="#step5" style="padding-right: 0;padding-left: 0;width: 16.67%">
                                                                <a href="#tab5" data-toggle="tab"> <span
                                                                            class="step">5</span> <span class="title">合同信息</span>
                                                                </a>
                                                            </li>
                                                            <li data-target="#step6" style="padding-right: 0;padding-left: 0;width: 16.6%">
                                                                <a href="#tab6" data-toggle="tab"> <span
                                                                            class="step">6</span> <span class="title">收入信息</span>
                                                                </a>
                                                            </li>
                                                        </ul>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="tab-content">
                                                        <div class="tab-pane active" id="tab1">
                                                            <br>

                                                            <h3><strong>Step 1 </strong> - Basic Information</h3>

                                                            <div class="row">

                                                                <div class="col-sm-12">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-envelope fa-lg fa-fw"></i></span>
                                                                            <input class="form-control input-lg"
                                                                                   placeholder="email@address.com"
                                                                                   type="text" name="email" id="email">

                                                                        </div>
                                                                    </div>

                                                                </div>

                                                            </div>

                                                            <div class="row">
                                                                <div class="col-sm-6">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-user fa-lg fa-fw"></i></span>
                                                                            <input class="form-control input-lg"
                                                                                   placeholder="First Name" type="text"
                                                                                   name="fname" id="fname">

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-user fa-lg fa-fw"></i></span>
                                                                            <input class="form-control input-lg"
                                                                                   placeholder="Last Name" type="text"
                                                                                   name="lname" id="lname">

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="tab-pane" id="tab2">
                                                            <br>

                                                            <h3><strong>Step 2</strong> - Billing Information</h3>

                                                            <div class="row">
                                                                <div class="col-sm-4">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-flag fa-lg fa-fw"></i></span>
                                                                            <select name="country"
                                                                                    class="form-control input-lg">

                                                                                <option value="Zimbabwe">Zimbabwe</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-map-marker fa-lg fa-fw"></i></span>
                                                                            <select class="form-control input-lg"
                                                                                    name="city">
                                                                                <option value="" selected="selected">Select
                                                                                    City
                                                                                </option>
                                                                                <option>Amsterdam</option>
                                                                                <option>Atlanta</option>
                                                                                <option>Minneapolis</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-4">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-envelope-o fa-lg fa-fw"></i></span>
                                                                            <input class="form-control input-lg"
                                                                                   placeholder="Postal Code" type="text"
                                                                                   name="postal" id="postal">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-6">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-phone fa-lg fa-fw"></i></span>
                                                                            <input class="form-control input-lg"
                                                                                   data-mask="+99 (999) 999-9999"
                                                                                   data-mask-placeholder="X"
                                                                                   placeholder="+1" type="text"
                                                                                   name="wphone" id="wphone">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <div class="form-group">
                                                                        <div class="input-group">
                                                                        <span class="input-group-addon"><i
                                                                                    class="fa fa-mobile fa-lg fa-fw"></i></span>
                                                                            <input class="form-control input-lg"
                                                                                   data-mask="+99 (999) 999-9999"
                                                                                   data-mask-placeholder="X"
                                                                                   placeholder="+01" type="text"
                                                                                   name="hphone" id="hphone">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="tab-pane" id="tab3">
                                                            <br>

                                                            <h3><strong>Step 3</strong> - Domain Setup</h3>

                                                            <div class="alert alert-info fade in">
                                                                <button class="close" data-dismiss="alert">
                                                                    ×
                                                                </button>
                                                                <i class="fa-fw fa fa-info"></i>
                                                                <strong>Info!</strong> Place an info message box if you
                                                                wish.
                                                            </div>
                                                            <div class="form-group">
                                                                <label>This is a label</label>
                                                                <input class="form-control input-lg"
                                                                       placeholder="Another input box here..." type="text"
                                                                       name="etc" id="etc">
                                                            </div>
                                                        </div>
                                                        <div class="tab-pane" id="tab4">
                                                            <br>

                                                            <h3><strong>Step 4</strong> - Save Form</h3>
                                                            <br>

                                                            <h1 class="text-center text-success"><strong><i
                                                                            class="fa fa-check fa-lg"></i> Complete</strong>
                                                            </h1>
                                                            <h4 class="text-center">Click next to finish</h4>
                                                            <br>
                                                            <br>
                                                        </div>
                                                        <div class="tab-pane" id="tab5">
                                                            <br>

                                                            <h3><strong>Step 5</strong> - Save Form</h3>
                                                            <br>

                                                            <h1 class="text-center text-success"><strong><i
                                                                            class="fa fa-check fa-lg"></i> Complete</strong>
                                                            </h1>
                                                            <h4 class="text-center">Click next to finish</h4>
                                                            <br>
                                                            <br>
                                                        </div>
                                                        <div class="tab-pane" id="tab6">
                                                            <br>

                                                            <h3><strong>Step 6</strong> - Save Form</h3>
                                                            <br>

                                                            <h1 class="text-center text-success"><strong><i
                                                                            class="fa fa-check fa-lg"></i> Complete</strong>
                                                            </h1>
                                                            <h4 class="text-center">Click next to finish</h4>
                                                            <br>
                                                            <br>
                                                        </div>

                                                        <div class="form-actions">
                                                            <div class="row">
                                                                <footer>
                                                                    <button type="submit" class="btn btn-primary">
                                                                        Submit
                                                                    </button>
                                                                    <button type="button" class="btn btn-default" onclick="window.history.back();">
                                                                        Back
                                                                    </button>
                                                                </footer>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </form>
                                        </div>

                                    </div>
                                    <!-- end widget content -->

                                </div>
                                <!-- end widget div -->

                            </div>
                            <!-- end widget -->

                        </article>
                        <!-- WIDGET END -->

                    </div>

                    <!-- end row -->

                </section>
                <!-- end widget grid -->
                <!-- /.modal-content -->
            </div>
        </div>
        <!-- 修改用户信息/.modal 弹出框 END -->

    </div>
    <!-- END MAIN CONTENT -->

</div>
<!-- END MAIN PANEL -->
<!-- SHORTCUT AREA : With large tiles (activated via clicking user name tag)
Note: These tiles are completely responsive,
you can add as many as you like
-->
<div id="shortcut">
    <ul>
        <li>
            <a href="#inbox.html" class="jarvismetro-tile big-cubes bg-color-blue"> <span class="iconbox"> <i
                            class="fa fa-envelope fa-4x"></i> <span>Mail <span class="label pull-right bg-color-darken">14</span></span> </span>
            </a>
        </li>
        <li>
            <a href="#calendar.html" class="jarvismetro-tile big-cubes bg-color-orangeDark"> <span class="iconbox"> <i
                            class="fa fa-calendar fa-4x"></i> <span>Calendar</span> </span> </a>
        </li>
        <li>
            <a href="#gmap-xml.html" class="jarvismetro-tile big-cubes bg-color-purple"> <span class="iconbox"> <i
                            class="fa fa-map-marker fa-4x"></i> <span>Maps</span> </span> </a>
        </li>
        <li>
            <a href="#invoice.html" class="jarvismetro-tile big-cubes bg-color-blueDark"> <span class="iconbox"> <i
                            class="fa fa-book fa-4x"></i> <span>Invoice <span class="label pull-right bg-color-darken">99</span></span> </span>
            </a>
        </li>
        <li>
            <a href="#gallery.html" class="jarvismetro-tile big-cubes bg-color-greenLight"> <span class="iconbox"> <i
                            class="fa fa-picture-o fa-4x"></i> <span>Gallery </span> </span> </a>
        </li>
        <li>
            <a href="javascript:void(0);" class="jarvismetro-tile big-cubes selected bg-color-pinkDark"> <span
                        class="iconbox"> <i class="fa fa-user fa-4x"></i> <span>My Profile </span> </span> </a>
        </li>
    </ul>
</div>
<!-- END SHORTCUT AREA -->

<!--================================================== -->

<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)-->
<script data-pace-options='{ "restartOnRequestAfter": true }' src="js/plugin/pace/pace.min.js"></script>

<!-- Link to Google CDN's jQuery + jQueryUI; fall back to local -->
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script> -->
<script>
    if (!window.jQuery) {
        document.write('<script src="js/libs/jquery-2.0.2.min.js"><\/script>');
    }
</script>

<!-- <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script> -->
<script>
    if (!window.jQuery.ui) {
        document.write('<script src="js/libs/jquery-ui-1.10.3.min.js"><\/script>');
    }
</script>

<!-- JS TOUCH : include this plugin for mobile drag / drop touch events
<script src="js/plugin/jquery-touch/jquery.ui.touch-punch.min.js"></script> -->

<!-- BOOTSTRAP JS -->
<script src="js/bootstrap/bootstrap.min.js"></script>

<!-- CUSTOM NOTIFICATION -->
<script src="js/notification/SmartNotification.min.js"></script>

<!-- JARVIS WIDGETS -->
<script src="js/smartwidgets/jarvis.widget.min.js"></script>

<!-- EASY PIE CHARTS -->
<script src="js/plugin/easy-pie-chart/jquery.easy-pie-chart.min.js"></script>

<!-- SPARKLINES -->
<script src="js/plugin/sparkline/jquery.sparkline.min.js"></script>

<!-- JQUERY VALIDATE -->
<script src="js/plugin/jquery-validate/jquery.validate.min.js"></script>

<!-- JQUERY MASKED INPUT -->
<script src="js/plugin/masked-input/jquery.maskedinput.min.js"></script>

<!-- JQUERY SELECT2 INPUT -->
<script src="js/plugin/select2/select2.min.js"></script>

<!-- JQUERY UI + Bootstrap Slider -->
<script src="js/plugin/bootstrap-slider/bootstrap-slider.min.js"></script>

<!-- browser msie issue fix -->
<script src="js/plugin/msie-fix/jquery.mb.browser.min.js"></script>

<!-- FastClick: For mobile devices -->
<script src="js/plugin/fastclick/fastclick.js"></script>

<!--[if IE 7]>

<h1>Your browser is out of date, please update your browser by going to www.microsoft.com/download</h1>

<![endif]-->

<!-- Demo purpose only -->
<script src="js/demo.js"></script>

<!-- MAIN APP JS FILE -->
<script src="js/app.js"></script>

<!-- PAGE RELATED PLUGIN(S) -->
<script src="js/plugin/datatables/jquery.dataTables-cust.min.js"></script>
<script src="js/plugin/datatables/ColReorder.min.js"></script>
<script src="js/plugin/datatables/FixedColumns.min.js"></script>
<script src="js/plugin/datatables/ColVis.min.js"></script>
<script src="js/plugin/datatables/ZeroClipboard.js"></script>
<script src="js/plugin/datatables/media/js/TableTools.min.js"></script>
<script src="js/plugin/datatables/DT_bootstrap.js"></script>


<script type="text/javascript">

    // DO NOT REMOVE : GLOBAL FUNCTIONS!

    $(document).ready(function () {

        pageSetUp();

        /*
         * BASIC
         */
        $('#dt_basic').dataTable({
            "sPaginationType": "bootstrap_full"
        });

        /* END BASIC */

        /* Add the events etc before DataTables hides a column */
        $("#datatable_fixed_column thead input").keyup(function () {
            oTable.fnFilter(this.value, oTable.oApi._fnVisibleToColumnIndex(oTable.fnSettings(), $("thead input").index(this)));
        });

        $("#datatable_fixed_column thead input").each(function (i) {
            this.initVal = this.value;
        });
        $("#datatable_fixed_column thead input").focus(function () {
            if (this.className == "search_init") {
                this.className = "";
                this.value = "";
            }
        });
        $("#datatable_fixed_column thead input").blur(function (i) {
            if (this.value == "") {
                this.className = "search_init";
                this.value = this.initVal;
            }
        });


        var oTable = $('#datatable_fixed_column').dataTable({
            "sDom": "<'dt-top-row'><'dt-wrapper't><'dt-row dt-bottom-row'<'row'<'col-sm-6'i><'col-sm-6 text-right'p>>",
            //"sDom" : "t<'row dt-wrapper'<'col-sm-6'i><'dt-row dt-bottom-row'<'row'<'col-sm-6'i><'col-sm-6 text-right'>>",
            "oLanguage": {
                "sSearch": "Search all columns:"
            },
            "bSortCellsTop": true
        });


        /*
         * COL ORDER
         */
        $('#datatable_col_reorder').dataTable({
            "sPaginationType": "bootstrap",
            "sDom": "R<'dt-top-row'Clf>r<'dt-wrapper't><'dt-row dt-bottom-row'<'row'<'col-sm-6'i><'col-sm-6 text-right'p>>",
            "fnInitComplete": function (oSettings, json) {
                $('.ColVis_Button').addClass('btn btn-default btn-sm').html('显示列 <i class="icon-arrow-down"></i>');
            }
        });

        /* END COL ORDER */

        /* TABLE TOOLS */
        $('#datatable_tabletools').dataTable({
            "sDom": "<'dt-top-row'Tlf>r<'dt-wrapper't><'dt-row dt-bottom-row'<'row'<'col-sm-6'i><'col-sm-6 text-right'p>>",
            "oTableTools": {
                "aButtons": ["copy", "print", {
                    "sExtends": "collection",
                    "sButtonText": 'Save <span class="caret" />',
                    "aButtons": ["csv", "xls", "pdf"]
                }],
                "sSwfPath": "js/plugin/datatables/media/swf/copy_csv_xls_pdf.swf"
            },
            "fnInitComplete": function (oSettings, json) {
                $(this).closest('#dt_table_tools_wrapper').find('.DTTT.btn-group').addClass('table_tools_group').children('a.btn').each(function () {
                    $(this).addClass('btn-sm btn-default');
                });
            }
        });

        /* END TABLE TOOLS */

        //在表格内添加用户管理按钮
        $(".widget-body-toolbar").append($("#ControlButton").html());
        $("#ControlButton").remove();

        //全选(全不选)用户
        $("input[name='selectAll']").change(function(e){
            if($(this).prop("checked")){
                $("input[name='selectOne']").each(function(){
                    $(this).prop("checked", true);
                });
            }else{
                $("input[name='selectOne']").each(function(){
                    $(this).prop("checked", false);
                });
            }
        })

        //删除用户功能
        $("#delete-proj").click(function(e){
            //获取所有选中要删除用户id的数组
            var idsToDelete = [];
            $("input[name='selectOne']:checked").each(function(){
                idsToDelete.push($(this).attr("id"));
            });
            $.ajax({
                type:"DELETE",
                url:"/user",
                contentType: 'application/json',
                data: JSON.stringify(idsToDelete),
                dataType:"json",
                success:function(msg){
                    if(msg.result === "delete success"){
                        location.reload();
                    }else{
                        alert("删除失败");
                    }
                }
            });
        });

        //向修改信息框中显示已有的信息
        $(".edit").click(function(){
            //获取用户id
            var userToEdit = {};
            userToEdit.id = $(this).attr("data-userId");
            $.ajax({
                type:"POST",
                url:"/user/getById",
                contentType: 'application/json',
                data: JSON.stringify(userToEdit),
                dataType:"json",
                success:function(user){
                    if(user !== null){
                        $("#editUserForm input[name='_id']").val(userToEdit.id);
                        $("#editUserForm input[name='name']").val(user.name);
//                        $("#editUserForm input[name='password']").val(user.password);
                        $("#editUserForm input[name='email']").val(user.email);
                        $("#editUserForm input[name='phone']").val(user.phone);
                        $("#editUserForm input[name='depart']").val(user.depart);
                        $("#editUserForm input[name='city']").val(user.city);
                    }
                }
            })
        });

        //退出修改框时清空内容
        $("#editModal .close").click(function(){
            $("#editUserForm input").each(function(){
                $(this).val("");
            });
            clearErrInfo("editUserForm");
        });
        $("#cancelEdit").click(function(){
            $("#editUserForm input").each(function(){
                $(this).val("");
            });
            clearErrInfo("editUserForm");
        });

        //退出新增用户框时清空内容
        $("#myModal .close").click(function(){
            $("#newuser-form input").each(function(){
                $(this).val("");
            });
            clearErrInfo("newuser-form");
        });
        $("#cancelCreating").click(function(){
            $("#newuser-form input").each(function(){
                $(this).val("");
            });
            clearErrInfo("newuser-form");
        });

        //新增用户框发送，验证
        $("#createUser").click(function(e){
            e.preventDefault();
            //清除输入框内表单的错误信息
            clearErrInfo("newuser-form");
            //初始化user对象，验证输入
            var formInfo = {},hasError = false;
            formInfo.user = {};
            formInfo.user.name = $("#newuser-form input[name='user']").val();
            if(formInfo.user.name === ""){
                hasError = true;
                showErrInfo("newuser-form","user","用户名不能为空");
            }
            formInfo.user.password = $("#newuser-form input[name='password']").val();
            formInfo.user.vpassword = $("#newuser-form input[name='vpassword']").val();
            if(formInfo.user.password === ""){
                hasError = true;
                showErrInfo("newuser-form","password","密码不能为空");
            }
            if(formInfo.user.password !== formInfo.user.vpassword){
                hasError = true;
                showErrInfo("newuser-form","vpassword","密码输入不一致");
            }
            formInfo.user.email = $("#newuser-form input[name='email']").val();
            formInfo.user.phone = $("#newuser-form input[name='phone']").val();
            formInfo.user.depart = $("#newuser-form input[name='depart']").val();
            formInfo.user.city = $("#newuser-form input[name='city']").val();
            //检查表单是否有误，无误则发送请求
            if(hasError === true){
                return;
            }else{
                $.ajax({
                    type:"POST",
                    url:"/user",
                    contentType: 'application/json',
                    data: JSON.stringify(formInfo),
                    dataType:"json",
                    success:function(result){
                        if(result.success === true){
                            location.reload();
                        }else{
                            if(result.msg === "用户名已存在"){
                                hasError = true;
                                showErrInfo("newuser-form","user","用户名已存在");
                            }
                            if(result.msg === "两次输入的密码不一致"){
                                hasError = true;
                                showErrInfo("newuser-form","vpassword","两次输入的密码不一致");
                            }
                            if(result.msg === "数据存储出错"){
                                alert("数据存储出错");
                            }
                        }
                    }
                });
            }
        });

        //修改用户信息框发送，验证
        $("#editUser").click(function(e){
            e.preventDefault();
            //清除输入框内表单的错误信息
            clearErrInfo("editUserForm");
            //初始化user对象，验证输入
            var formInfo = {},hasError = false;
            formInfo.user = {};
            formInfo.user.name = $("#editUserForm input[name='name']").val();
            if(formInfo.user.name === ""){
                hasError = true;
                showErrInfo("editUserForm","name","用户名不能为空");
            }
            formInfo.user._id = $("#editUserForm input[name='_id']").val();
            formInfo.user.email = $("#editUserForm input[name='email']").val();
            formInfo.user.phone = $("#editUserForm input[name='phone']").val();
            formInfo.user.depart = $("#editUserForm input[name='depart']").val();
            formInfo.user.city = $("#editUserForm input[name='city']").val();
            //检查表单是否有误，无误则发送请求
            if(hasError === true){
                return;
            }else{
                $.ajax({
                    type:"POST",
                    url:"/user/update",
                    contentType: 'application/json',
                    data: JSON.stringify(formInfo),
                    dataType:"json",
                    success:function(result){
                        if(result.success === true){
                            location.reload();
                        }else{
                            if(result.msg === "用户名已被占用"){
                                hasError = true;
                                showErrInfo("editUserForm","name","用户名已被占用");
                            }
                            if(result.msg === "数据存储出错"){
                                alert("数据存储出错");
                            }
                        }
                    }
                });
            }
        });

        //输入框获得焦点时清除错误信息
        $("#newuser-form input").each(function(){
            var inputName = $(this).attr("name");
            $(this).focus(function(){
                clearErrInfoByInputName("newuser-form",inputName);
            });
        });
        $("#editUserForm input").each(function(){
            var inputName = $(this).attr("name");
            $(this).focus(function(){
                clearErrInfoByInputName("editUserForm",inputName);
            });
        });

        //清除输入框内表单的错误信息
        function clearErrInfo(formId){
            $("#" + formId + " span[class*='err-info']").remove();
            $("#" + formId + " input").each(function(){
                $(this)
                        .parent()
                        .parent()
                        .removeClass("has-error");
            });
        }
        function clearErrInfoByInputName(formId,inputName){
            $("#" + formId + " input[name='" + inputName + "']").each(function(){
                $(this)
                        .parent()
                        .parent()
                        .removeClass("has-error")
                        .children(".err-info")
                        .remove();
            });
        }

        //展示输入框内表单的错误信息
        function showErrInfo(formId,inputName,errInfo){
            $("#" + formId + " input[name='" + inputName + "']")
                    .parent()
                    .parent()
                    .addClass("has-error")
                    .append('<span class="help-block err-info"><i class="fa fa-warning"></i>' + errInfo + '</span>');
        }

        //去除checkbox列的排序按钮
        $("#datatable_col_reorder thead th input").parent().removeClass().unbind("click");
        $("#datatable_col_reorder thead th").bind("click",function(){
            $("#datatable_col_reorder thead th input").parent().removeClass();
        });

        //去除"显示列"中隐藏checkbox列的选项
        $("button[class='ColVis_Button TableTools_Button ColVis_MasterButton btn btn-default btn-sm']").one("click",function(){
            setTimeout(function(){
                $("div[class='ColVis_collection TableTools_collection'] button:first-child").remove();
            },100);
        });

    })

</script>

<%- include footer %>